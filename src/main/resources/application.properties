# ===================================================================
# CONFIGURACIÓN DE BASE DE DATOS H2
# ===================================================================
spring.jpa.hibernate.ddl-auto=create
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

spring.datasource.url=${NAME_DB:jdbc:h2:file:./test}
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=${USERNAME_DB:user}
spring.datasource.password=${PASSWORD_DB:password}
spring.jpa.defer-datasource-initialization=true

spring.sql.init.mode=always
spring.sql.init.platform=h2

# ===================================================================
# CONFIGURACIÓN DEL SERVIDOR
# ===================================================================
server.port=${PORT:8000}
server.servlet.context-path=/api

# Graceful shutdown para Docker
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=30s

# ===================================================================
# CONFIGURACIÓN DE ACTUATOR (NUEVO - Para Docker Health Check)
# ===================================================================
# Habilitar endpoints de actuator
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized

# Health check endpoints para Docker/Kubernetes
management.health.livenessState.enabled=true
management.health.readinessState.enabled=true

# Base path para actuator (bajo /api como el resto de la app)
management.endpoints.web.base-path=/actuator
management.server.port=${PORT:8000}

# ===================================================================
# CONFIGURACIÓN DE LOGGING
# ===================================================================
# Nivel de logging (configurable via env var)
logging.level.root=INFO
logging.level.devsu.devops=INFO

# Patrón de logging optimizado para contenedores Docker
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# ===================================================================
# CONFIGURACIÓN DE SWAGGER/OPENAPI
# ===================================================================
# Swagger ya está configurado por springdoc-openapi-starter-webmvc-ui
# Disponible en: http://localhost:8000/api/swagger-ui.html

# ===================================================================
# CONFIGURACIÓN ADICIONAL
# ===================================================================
# Timezone
spring.jackson.time-zone=${TZ:America/Guayaquil}
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
